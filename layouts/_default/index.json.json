{{- /* Initialize empty slices for the lists */ -}}
{{- $categoriesList := slice -}}
{{- $authorList := slice -}}

{{- /* 1. Process Categories */ -}}
{{- if .Site.Taxonomies.categories -}}
  {{- range $name, $taxonomy := .Site.Taxonomies.categories -}}
    {{- $details := dict 
        "name" ($name | humanize | title) 
        "slug" ($name | urlize)
        "count" (len $taxonomy) 
        "url" (printf "/categories/%s/" ($name | urlize) | absURL)
    -}}
    {{- $categoriesList = $categoriesList | append $details -}}
  {{- end -}}
{{- end -}}

{{- /* 2. Process Authors */ -}}
{{- if .Site.Taxonomies.author -}}
  {{- range $name, $taxonomy := .Site.Taxonomies.author -}}
    {{- $authorPage := site.GetPage (printf "author/%s" $name) -}}
    {{- $details := dict 
        "name" ($name | humanize | title) 
        "count" (len $taxonomy) 
        "url" (printf "/author/%s/" ($name | urlize) | absURL)
    -}}
    {{- if $authorPage -}}
      {{- $details = merge $details (dict 
          "name" $authorPage.Title
          "bio" $authorPage.Params.bio
          "image" $authorPage.Params.profile_image
          "telegram" $authorPage.Params.telegram
      ) -}}
    {{- end -}}
    {{- $authorList = $authorList | append $details -}}
  {{- end -}}
{{- end -}}

{{- /* 3. Combine and Output Single JSON */ -}}
{{- dict "categories" $categoriesList "author" $authorList | jsonify -}}